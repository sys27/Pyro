<div *ngIf="directoryView | async as view">
  <div class="grid">
    <div class="col">
      <p-toolbar>
        <div
          *ngIf="branches | async as b"
          class="p-toolbar-group-start">
          <p-dropdown
            [options]="b"
            optionLabel="name"
            [ngModel]="selectedBranch | async"
            (ngModelChange)="selectBranch($event)" />
        </div>
      </p-toolbar>

      <p-toolbar>
        <div class="p-toolbar-group-start gap-2">
          <span class="pi pi-user"></span>
          <span class="font-medium">{{ view.commit.author.name }}</span>
          <span class="text-400">{{ view.commit.message }}</span>
        </div>
        <div class="p-toolbar-group-end gap-2">
          <span class="text-400">{{ view.commit.hash | slice: 0 : 6 }}</span>
          <span class="text-400">{{ view.commit.date | date: 'shortDate' }}</span>
          <span class="pi pi-history"></span>
          <span>{{ view.commitsCount }} commits</span>
        </div>
      </p-toolbar>

      <p-table
        [value]="view.items"
        selectionMode="single"
        styleClass="p-datatable-striped">
        <ng-template
          pTemplate="body"
          let-item>
          <tr>
            <td>
              <span
                *ngIf="item.isDirectory"
                class="pi pi-folder"></span>
              <span
                *ngIf="!item.isDirectory"
                class="pi pi-file"></span>
            </td>
            <td>
              <a
                *ngIf="item.isDirectory"
                [routerLink]="[view.commit.hash, item.name]">
                {{ item.name }}
              </a>
              <span *ngIf="!item.isDirectory">
                {{ item.name }}
              </span>
            </td>
            <td class="text-400">{{ item.message }}</td>
            <td class="text-400">{{ item.date | date: 'shortDate' }}</td>
          </tr>
        </ng-template>
      </p-table>

      <p-tabView>
        <p-tabPanel
          *ngIf="hasReadmeFile() | async"
          header="README">
          <pre>{{ 'xxx' }}</pre>
        </p-tabPanel>
        <p-tabPanel
          *ngIf="hasLicenseFile() | async"
          header="LICENSE">
          <pre>{{ 'xxx' }}</pre>
        </p-tabPanel>
      </p-tabView>
    </div>

    <div class="col-2">
      <div class="text-2xl">{{ repositoryName | async }}</div>
    </div>
  </div>
</div>
